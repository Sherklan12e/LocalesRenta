(()=>{var b={headers:{},mergeStrategy:"replace",transitions:!1},F=(e,t)=>{console.error(`You can't use the "morph" merge without first installing the Alpine "morph" plugin here: https://alpinejs.dev/plugins/morph`)};function j(e){e.morph&&(F=e.morph),e.directive("target",(r,{value:n,modifiers:a,expression:o},{evaluateLater:i,effect:s})=>{let f=d=>{let u=a.filter(c=>c==="error"||parseInt(c));u=u.length?u:["xxx"],u.forEach(c=>{c.charAt(0)==="3"&&(c="3xx"),p.set(r,{[c]:{ids:O(r,d),focus:!a.includes("nofocus"),history:a.includes("push")?"push":a.includes("replace")?"replace":!1}})})};if(n==="dynamic"){let d=i(o);s(()=>d(f))}else f(o)}),e.directive("headers",(r,{expression:n},{evaluateLater:a,effect:o})=>{let i=a(n||"{}");o(()=>{i(s=>{p.set(r,{headers:s})})})}),e.addInitSelector(()=>`[${e.prefixed("merge")}]`),e.directive("merge",(r,{value:n,modifiers:a,expression:o},{evaluateLater:i,effect:s})=>{let f=d=>{p.set(r,{strategy:d||b.mergeStrategy,transition:b.transitions||a.includes("transition")})};if(n==="dynamic"){let d=i(o);s(()=>d(f))}else f(o)}),e.magic("ajax",r=>async(n,a={})=>{let o=y(O(r,a.targets||a.target));o=a.sync?w(o):o;let i=I(r),s=Object.assign({},b.headers,a.headers||{}),f=a.method?a.method.toUpperCase():"GET",d=a.body,u=await S(r,o,n,i,s,f,d),c="history"in a?a.history:!1,l="focus"in a?a.focus:!0;return k(u,r,o,c,l)});let t=[];e.ajax={start(){t.length||(t.push(C("submit",K)),t.push(C("click",N)))},stop(){t.forEach(r=>r()),t=[]}},e.ajax.start()}j.configure=e=>(b=Object.assign(b,e),j);var P=j,p={store:new WeakMap,set(e,t){this.store.has(e)?this.store.set(e,Object.assign(this.store.get(e),t)):this.store.set(e,t)},get(e){return this.store.get(e)||{}},has(e){return this.store.has(e)}};async function N(e){if(e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e?.target.closest("a[href]:not([download]):not([noajax])");if(!t||!p.has(t)||t.isContentEditable||t.getAttribute("href").startsWith("#")||t.origin!==location.origin||t.pathname+t.search===location.pathname+location.search&&t.hash)return;e.preventDefault(),e.stopImmediatePropagation();let r=p.get(t),n=r.xxx||{},a=w(y(n.ids)),o=I(t),i=t.getAttribute("href")||o,s=r.headers||{},f=await S(t,a,i,o,s),d=q(r,f);d&&(n=r[d],a=w(y(n.ids)));let u=n.history,c=n.focus??!0;try{return await k(f,t,a,u,c)}catch(l){if(l.name==="RenderError"){console.warn(l.message),window.location.href=t.href;return}throw l}}async function K(e){if(e.defaultPrevented)return;let t=e.target,r=e.submitter,n=(r?.getAttribute("formmethod")||t.getAttribute("method")||"GET").toUpperCase();if(!t||!p.has(t)||n==="DIALOG"||r?.hasAttribute("formnoajax")||r?.hasAttribute("formtarget")||t.hasAttribute("noajax")||t.hasAttribute("target"))return;e.preventDefault(),e.stopImmediatePropagation();let a=p.get(t),o=a.xxx||{},i=w(y(o.ids)),s=I(t),f=t.getAttribute("action")||s,d=a.headers||{},u=new FormData(t),c=t.getAttribute("enctype");r&&(c=r.getAttribute("formenctype")||c,f=r.getAttribute("formaction")||f,r.name&&u.append(r.name,r.value));let l=await U(r,()=>S(t,i,f,s,d,n,u,c)),h=q(a,l);h&&(o=a[h],i=w(y(o.ids)));let x=o.history,m=o.focus??!0;try{return await k(l,t,i,x,m)}catch(A){if(A.name==="RenderError"){console.warn(A.message),t.setAttribute("noajax","true"),t.requestSubmit(r);return}throw A}}function C(e,t){let r=async a=>{try{await t(a)}catch(o){if(o.name==="AbortError")return;throw o}},n=()=>{document.removeEventListener(e,r,!1),document.addEventListener(e,r,!1)};return document.addEventListener(e,n,!0),()=>document.removeEventListener(e,n,!0)}async function U(e,t){if(!e)return await t();let r=a=>a.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",r);let n=await t();return e.removeAttribute("aria-disabled"),e.removeEventListener("click",r),n}var _={store:new Map,abort(e){if(this.store.has(e)){let t=this.store.get(e);t.controller.abort(),t.target.removeAttribute("aria-busy")}},set(e,t,r){this.abort(e),t.querySelectorAll("[aria-busy]").forEach(n=>this.abort(n.getAttribute("id"))),this.store.set(e,{target:t,controller:r}),t.setAttribute("aria-busy","true")}},E=new Map;async function S(e,t,r,n,a,o="GET",i=null,s="application/x-www-form-urlencoded"){if(!g(e,"ajax:before"))throw new DOMException("[ajax:before] aborted","AbortError");let f=new AbortController,d=[];t.forEach(l=>{let h=l.getAttribute("id");_.set(h,l,f),d.push(h)});let u;if(o==="GET"&&E.has(r))u=E.get(r);else{a["X-Alpine-Target"]=d.join("  "),a["X-Alpine-Request"]="true",a=Object.assign({},b.headers,a),i=i?$(i):null;let l={action:r,method:o,headers:a,body:i,referrer:n,enctype:s,signal:f.signal};g(e,"ajax:send",l),l.body&&(l.method==="GET"?(l.action=B(l.body,l.action),l.body=null):l.enctype!=="multipart/form-data"&&(l.body=R(l.body))),u=fetch(l.action,l).then(async h=>(h.html=await h.text(),h)),E.set(r,u)}let c=await u;return E.delete(r),c.ok?(c.redirected&&g(e,"ajax:redirect",c),g(e,"ajax:success",c)):g(e,"ajax:error",c),g(e,"ajax:sent",c),c}function $(e){if(e instanceof FormData)return e;if(e instanceof HTMLFormElement)return new FormData(e);let t=new FormData;for(let r in e)typeof e[r]=="object"?t.append(r,JSON.stringify(e[r])):t.append(r,e[r]);return t}function B(e,t){return t=new URL(t,document.baseURI),t.search=R(e).toString(),t.toString()}function R(e){let t=Array.from(e.entries()).filter(([r,n])=>!(n instanceof File));return new URLSearchParams(t)}async function k(e,t,r,n,a){if(!e.html){r.forEach(u=>u.removeAttribute("aria-busy"));return}n&&W(n,e.url);let i=document.createRange().createContextualFragment("<template>"+e.html+"</template>").firstElementChild.content,s=!a,f=r.map(async u=>{if(u===document){window.location.href=e.url;return}let c=u.getAttribute("id"),l=i.getElementById(c),h=p.get(u)?.strategy??b.mergeStrategy;if(!l){if(u.matches("[x-sync]")||!g(t,"ajax:missing",{target:u,response:e}))return;if(e.ok)return u.remove();throw new D(u,e.status)}let x=async()=>{let m=await H(h,u,l);return m&&(m.dataset.source=e.url,m.removeAttribute("aria-busy"),["[x-autofocus]","[autofocus]"].some(L=>s?!0:(m.matches(L)&&(s=M(m)),s||Array.from(m.querySelectorAll(L)).some(G=>M(G))))),g(m,"ajax:merged"),m};if(g(u,"ajax:merge",{strategy:h,content:l,merge:x}))return x()}),d=await Promise.all(f);return g(t,"ajax:after",{response:e,render:d}),d}async function H(e,t,r){let n={before(i,s){return i.before(...s.childNodes),i},replace(i,s){return i.replaceWith(s),s},update(i,s){return i.replaceChildren(...s.childNodes),i},prepend(i,s){return i.prepend(...s.childNodes),i},append(i,s){return i.append(...s.childNodes),i},after(i,s){return i.after(...s.childNodes),i},morph(i,s){return F(i,s),document.getElementById(s.getAttribute("id"))}};if(!p.get(t)?.transition||!document.startViewTransition)return n[e](t,r);let a=null;return await document.startViewTransition(()=>(a=n[e](t,r),Promise.resolve())).updateCallbackDone,a}function M(e){return!e||!e.getClientRects().length?!1:(setTimeout(()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.focus()},0),!0)}function W(e,t){return{push:()=>window.history.pushState({__ajax:!0},"",t),replace:()=>window.history.replaceState({__ajax:!0},"",t)}[e]()}function O(e,t=null){let r=[e.getAttribute("id")];if(t&&(r=Array.isArray(t)?t:t.split(" ")),r=r.filter(n=>n),r.length===0)throw new v(e);return r}function y(e=[]){return e.map(t=>{let r=t==="_self"?document:document.getElementById(t);if(!r)throw new T(t);return r})}function w(e){return document.querySelectorAll("[x-sync]").forEach(t=>{let r=t.getAttribute("id");if(!r)throw new IdNotFoundError(t);e.some(n=>n.getAttribute("id")===r)||e.push(t)}),e}function q(e,t){let r=t.redirected?"3xx":t.status.toString();return[r,r.charAt(0)+"xx",t.ok?"":"error"].find(n=>n in e)}function I(e){return e.closest("[data-source]")?.dataset.source||window.location.href}function g(e,t,r){return e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}var v=class extends DOMException{constructor(t){let r=(t.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${r} is missing an ID to target.`,"IDError")}},T=class extends DOMException{constructor(t){super(`Target [#${t}] was not found in current document.`,"TargetError")}},D=class extends DOMException{constructor(t,r){let n=t.getAttribute("id");super(`Target [#${n}] was not found in response with status [${r}].`,"RenderError")}};document.addEventListener("alpine:initializing",()=>{P(window.Alpine)});})();
